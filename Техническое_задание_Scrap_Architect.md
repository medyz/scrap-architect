# Техническое задание (ТЗ)
## Игра "Scrap Architect" (Мастер Переделки)

---

## 1. Общие сведения

### 1.1 Название проекта
**Scrap Architect** (Мастер Переделки)

### 1.2 Описание проекта
Физический симулятор строительства машин из подручных материалов для решения абсурдных бытовых задач. Игрок создает механизмы из различных деталей, тестирует их на полигонах и получает награды за успешное выполнение контрактов.

### 1.3 Целевая аудитория
- **Основная:** Игроки 13-35 лет, интересующиеся физическими симуляторами
- **Вторичная:** Поклонники Besiege, Human: Fall Flat, Teardown
- **Платформа:** PC (Steam)

---

## 2. Технические требования

### 2.1 Системные требования

#### Минимальные требования
- **ОС:** Windows 10 64-bit
- **Процессор:** Intel Core i3-6100 / AMD FX-6300
- **Память:** 4 GB RAM
- **Видеокарта:** NVIDIA GTX 750 Ti / AMD R7 260X
- **Место на диске:** 2 GB
- **DirectX:** Версия 11

#### Рекомендуемые требования
- **ОС:** Windows 10/11 64-bit
- **Процессор:** Intel Core i5-8400 / AMD Ryzen 5 2600
- **Память:** 8 GB RAM
- **Видеокарта:** NVIDIA GTX 1060 / AMD RX 580
- **Место на диске:** 2 GB
- **DirectX:** Версия 12

### 2.2 Технологический стек
- **Движок:** Unity 2022.3 LTS
- **Язык программирования:** C#
- **3D моделирование:** Blender
- **Система контроля версий:** Git
- **Платформа распространения:** Steam

---

## 3. Архитектура системы

### 3.1 Основные модули

#### 3.1.1 Система физики (Physics System)
- **Назначение:** Обеспечение реалистичной физики для всех объектов
- **Компоненты:**
  - Rigidbody для всех деталей
  - Collider системы (Box, Sphere, Mesh)
  - Joint системы (Fixed, Hinge, Spring, Configurable)
  - Система разрушения соединений
  - Оптимизация физических вычислений

#### 3.1.2 Система строительства (Building System)
- **Назначение:** Создание и редактирование механизмов
- **Компоненты:**
  - Drag & Drop интерфейс
  - Snap-point система
  - Система соединения деталей
  - Вращение и масштабирование объектов
  - Система сохранения/загрузки конструкций

#### 3.1.3 Система деталей (Parts System)
- **Назначение:** Управление всеми доступными деталями
- **Компоненты:**
  - База данных деталей
  - Система категорий
  - Система разблокировки
  - Параметры деталей (вес, прочность, стоимость)

#### 3.1.4 Система уровней (Level System)
- **Назначение:** Управление игровыми уровнями и контрактами
- **Компоненты:**
  - Загрузка/выгрузка уровней
  - Система целей и условий победы
  - Система препятствий и объектов
  - Система спавна игрока

#### 3.1.5 Система прогрессии (Progression System)
- **Назначение:** Управление прогрессом игрока
- **Компоненты:**
  - Система валюты "Скрап"
  - Система уровней игрока
  - Система достижений
  - Магазин деталей

#### 3.1.6 UI/UX система
- **Назначение:** Пользовательский интерфейс
- **Компоненты:**
  - Главное меню
  - Интерфейс строительства
  - Система подсказок
  - Настройки игры

### 3.2 Структура проекта Unity

```
Assets/
├── Scripts/
│   ├── Core/
│   │   ├── GameManager.cs
│   │   ├── LevelManager.cs
│   │   └── SaveSystem.cs
│   ├── Physics/
│   │   ├── JointSystem.cs
│   │   ├── DestructionSystem.cs
│   │   └── PhysicsOptimizer.cs
│   ├── Building/
│   │   ├── BuildingManager.cs
│   │   ├── SnapSystem.cs
│   │   └── PartConnector.cs
│   ├── Parts/
│   │   ├── PartBase.cs
│   │   ├── PartDatabase.cs
│   │   └── PartCategories.cs
│   ├── UI/
│   │   ├── UIManager.cs
│   │   ├── BuildingUI.cs
│   │   └── MenuUI.cs
│   └── Utils/
│       ├── Singleton.cs
│       └── EventSystem.cs
├── Prefabs/
│   ├── Parts/
│   ├── UI/
│   └── Levels/
├── Models/
│   ├── Parts/
│   ├── Environment/
│   └── Props/
├── Materials/
├── Textures/
├── Audio/
└── Scenes/
```

---

## 4. Детализированные требования

### 4.1 Система деталей

#### 4.1.1 Категории деталей
1. **Основа (Foundation)**
   - Деревянные балки (разных размеров)
   - Металлические балки
   - Плиты и панели
   - Трубы и стержни

2. **Соединения (Connections)**
   - Жесткие соединения
   - Шарниры
   - Пружины
   - Тросы

3. **Движители (Propulsion)**
   - Колеса (маленькие, большие, внедорожные)
   - Гусеницы
   - Пропеллеры
   - Реактивные двигатели

4. **Источники энергии (Power)**
   - Двигатели (разной мощности)
   - Аккумуляторы
   - Солнечные панели

5. **Активаторы (Actuators)**
   - Пневмоцилиндры
   - Электромагниты
   - Клейкие поверхности

6. **Инструменты (Tools)**
   - Манипуляторы
   - Краскопульты
   - Пылесосы
   - Ковши

7. **Управление (Control)**
   - Сиденье водителя
   - Панели управления
   - Кнопки и переключатели

#### 4.1.2 Параметры деталей
- **Название** (string)
- **Категория** (enum)
- **Модель** (GameObject)
- **Вес** (float)
- **Прочность** (float)
- **Стоимость** (int)
- **Точки соединения** (Vector3[])
- **Тип соединения** (JointType)
- **Описание** (string)

### 4.2 Система физики

#### 4.2.1 Требования к физике
- **Реалистичность:** Детали должны вести себя как реальные объекты
- **Производительность:** Поддержка до 1000 активных объектов
- **Стабильность:** Отсутствие "летающих" объектов
- **Разрушаемость:** Соединения должны ломаться при перегрузке

#### 4.2.2 Типы соединений
1. **Fixed Joint** - жесткое соединение
2. **Hinge Joint** - шарнирное соединение
3. **Spring Joint** - пружинное соединение
4. **Configurable Joint** - настраиваемое соединение

#### 4.2.3 Система разрушения
- **Порог разрушения:** Настраиваемый для каждого соединения
- **Визуальные эффекты:** Частицы при разрушении
- **Звуковые эффекты:** Звуки ломающихся соединений

### 4.3 Система строительства

#### 4.3.1 Интерфейс строительства
- **Панель деталей:** Слева, с категориями
- **Область строительства:** Центр экрана
- **Панель управления:** Справа
- **Мини-карта:** Показывает уровень

#### 4.3.2 Функциональность
- **Drag & Drop:** Перетаскивание деталей
- **Snap System:** Автоматическая привязка к точкам соединения
- **Rotation:** Вращение деталей (90°, 180°, 270°)
- **Scaling:** Масштабирование (ограниченное)
- **Deletion:** Удаление деталей
- **Undo/Redo:** Отмена/повтор действий

#### 4.3.3 Ограничения
- **Максимум деталей:** 500 на конструкцию
- **Максимум соединений:** 1000
- **Размер конструкции:** Ограничен областью строительства

### 4.4 Система уровней

#### 4.4.1 Структура уровня
- **Геометрия:** Ландшафт и препятствия
- **Объекты:** Интерактивные элементы
- **Цели:** Условия победы
- **Спавн:** Точка появления игрока
- **Ограничения:** Временные лимиты, ограничения деталей

#### 4.4.2 Типы контрактов
1. **Доставка:** Перевезти объект из А в Б
2. **Сбор:** Собрать все объекты определенного типа
3. **Покраска:** Покрасить указанные поверхности
4. **Уборка:** Убрать мусор с территории
5. **Гонка:** Достичь финиша быстрее соперника
6. **Строительство:** Построить определенную конструкцию

### 4.5 Система прогрессии

#### 4.5.1 Валютная система
- **Скрап:** Основная валюта игры
- **Источники:** Выполнение контрактов, достижения
- **Траты:** Покупка новых деталей

#### 4.5.2 Система уровней
- **Опыт:** Начисляется за выполнение задач
- **Уровни:** Открывают новые детали и возможности
- **Достижения:** Специальные награды за особые действия

---

## 5. Пользовательский интерфейс

### 5.1 Главное меню
- **Кнопка "Играть"**
- **Кнопка "Мастерская"** (Steam Workshop)
- **Кнопка "Гараж"** (Песочница)
- **Кнопка "Настройки"**
- **Кнопка "Выход"**

### 5.2 Интерфейс строительства
- **Панель деталей** (слева)
- **Область строительства** (центр)
- **Панель управления** (справа)
- **Мини-карта** (в углу)
- **Кнопки управления** (внизу)

### 5.3 Интерфейс уровня
- **Цель миссии** (вверху)
- **Мини-карта** (в углу)
- **Кнопки управления** (внизу)
- **Индикатор времени** (если есть)
- **Кнопка "Пауза"**

### 5.4 Настройки
- **Графика:** Качество, разрешение, FPS
- **Звук:** Громкость музыки и эффектов
- **Управление:** Настройка клавиш
- **Игра:** Язык, сложность

---

## 6. Система сохранений

### 6.1 Сохраняемые данные
- **Прогресс игрока:** Уровень, скрап, достижения
- **Разблокированные детали**
- **Выполненные контракты**
- **Пользовательские конструкции**
- **Настройки игры**

### 6.2 Формат сохранений
- **Файлы:** JSON формат
- **Локация:** %APPDATA%/ScrapArchitect/
- **Облачные сохранения:** Steam Cloud

---

## 7. Система звука

### 7.1 Звуковые эффекты
- **Двигатели:** Разные звуки для разных типов
- **Соединения:** Звуки при соединении/разъединении
- **Разрушения:** Звуки ломающихся деталей
- **Столкновения:** Звуки ударов
- **UI:** Звуки кнопок и интерфейса

### 7.2 Музыка
- **Главное меню:** Спокойная, ностальгическая
- **Строительство:** Творческая, вдохновляющая
- **Тестирование:** Динамичная, напряженная
- **Победа:** Торжественная
- **Поражение:** Комичная

---

## 8. Система оптимизации

### 8.1 Производительность
- **LOD система:** Упрощение моделей на расстоянии
- **Culling:** Отсечение невидимых объектов
- **Batching:** Объединение похожих объектов
- **Pooling:** Переиспользование объектов

### 8.2 Память
- **Асинхронная загрузка:** Загрузка ресурсов в фоне
- **Кэширование:** Сохранение часто используемых ресурсов
- **Очистка:** Удаление неиспользуемых ресурсов

---

## 9. Система тестирования

### 9.1 Автоматические тесты
- **Unit тесты:** Для критических систем
- **Интеграционные тесты:** Для взаимодействия модулей
- **Performance тесты:** Для производительности

### 9.2 Ручное тестирование
- **Функциональное тестирование:** Все функции игры
- **Тестирование производительности:** На разных конфигурациях
- **Тестирование совместимости:** На разных системах

---

## 10. Система обновлений

### 10.1 Автоматические обновления
- **Steam:** Автоматическое обновление через Steam
- **Проверка версий:** При запуске игры
- **Загрузка патчей:** В фоновом режиме

### 10.2 Система бэкапов
- **Автоматические бэкапы:** Перед обновлениями
- **Восстановление:** Возможность отката к предыдущей версии
- **Экспорт/импорт:** Сохранений и конструкций

---

## 11. Система аналитики

### 11.1 Собираемые данные
- **Игровая статистика:** Время игры, выполненные контракты
- **Производительность:** FPS, использование памяти
- **Ошибки:** Критические ошибки и их контекст
- **Пользовательское поведение:** Популярные детали, уровни

### 11.2 Конфиденциальность
- **Анонимность:** Данные не содержат личной информации
- **Согласие:** Пользователь может отключить сбор данных
- **Безопасность:** Шифрование передаваемых данных

---

## 12. Система локализации

### 12.1 Поддерживаемые языки
- **Русский** (основной)
- **Английский**
- **Немецкий**
- **Французский**
- **Испанский**

### 12.2 Локализуемый контент
- **UI текст:** Все элементы интерфейса
- **Описания деталей:** Названия и описания
- **Диалоги:** Реплики персонажей
- **Достижения:** Названия и описания

---

## 13. Система моддинга

### 13.1 Steam Workshop
- **Пользовательские детали:** Создание новых деталей
- **Пользовательские уровни:** Создание новых контрактов
- **Пользовательские конструкции:** Обмен готовыми машинами
- **Рейтинговая система:** Оценка пользовательского контента

### 13.2 API для моддеров
- **Документация:** Подробная документация API
- **Примеры:** Готовые примеры модов
- **Инструменты:** Утилиты для создания модов

---

## 14. Система безопасности

### 14.1 Защита от читерства
- **Валидация данных:** Проверка корректности сохранений
- **Античит:** Обнаружение модификации игры
- **Серверная валидация:** Проверка результатов на сервере

### 14.2 Защита контента
- **Шифрование:** Защита важных файлов
- **Лицензирование:** Защита от несанкционированного копирования
- **DRM:** Базовая защита через Steam

---

## 15. Система поддержки

### 15.1 Техническая поддержка
- **FAQ:** Часто задаваемые вопросы
- **База знаний:** Подробные инструкции
- **Форум:** Сообщество пользователей
- **Email поддержка:** Для сложных проблем

### 15.2 Обновления и патчи
- **Еженедельные обновления:** Исправления багов
- **Ежемесячные обновления:** Новый контент
- **Квартальные обновления:** Крупные изменения

---

## 16. Критерии приемки

### 16.1 Функциональные требования
- [ ] Все основные системы работают корректно
- [ ] Физика стабильна и реалистична
- [ ] UI интуитивен и отзывчив
- [ ] Система сохранений работает надежно
- [ ] Производительность соответствует требованиям

### 16.2 Нефункциональные требования
- [ ] Игра запускается на минимальных системных требованиях
- [ ] FPS не падает ниже 30 на рекомендуемых требованиях
- [ ] Размер игры не превышает 2 GB
- [ ] Время загрузки уровней не превышает 10 секунд
- [ ] Отсутствуют критические баги

### 16.3 Пользовательские требования
- [ ] Игра понятна новичкам
- [ ] Есть обучающий туториал
- [ ] Система подсказок работает корректно
- [ ] Интерфейс локализован на русский язык
- [ ] Игра доставляет удовольствие от прохождения

---

## 17. Риски и митигация

### 17.1 Технические риски
- **Сложность физики:** Может потребовать больше времени
  - *Митигация:* Начать с простой физики, постепенно усложнять
- **Производительность:** Большие конструкции могут тормозить
  - *Митигация:* Установить лимиты, оптимизировать рендеринг
- **Стабильность:** Физика может быть нестабильной
  - *Митигация:* Тщательное тестирование, настройка параметров

### 17.2 Проектные риски
- **Сроки:** Может потребоваться больше времени
  - *Митигация:* Гибкое планирование, приоритизация задач
- **Ресурсы:** Нехватка времени или средств
  - *Митигация:* Фокус на MVP, постепенное развитие
- **Качество:** Может не соответствовать ожиданиям
  - *Митигация:* Регулярное тестирование, фидбек от пользователей

---

## 18. Заключение

Данное техническое задание определяет полный набор требований для разработки игры "Scrap Architect". Документ служит основой для планирования, разработки и тестирования проекта.

**Следующие шаги:**
1. Утверждение ТЗ
2. Создание детального плана разработки
3. Настройка среды разработки
4. Начало прототипирования

**Версия документа:** 1.0  
**Дата создания:** 2024  
**Ответственный:** Команда разработки
