# Базовые детали - Система строительства

## Обзор

Базовые детали - это фундаментальные компоненты для строительства машин в игре "Scrap Architect". Система включает в себя различные типы деталей, каждая со своими уникальными свойствами и функциями.

## Типы деталей

### 1. Block - Блоки
**Файл:** `Block.cs`

Базовые строительные блоки для создания конструкции.

**Типы блоков:**
- **Wood** - Деревянный блок (масса: 1.0, здоровье: 50, стоимость: 5)
- **Metal** - Металлический блок (масса: 3.0, здоровье: 150, стоимость: 15)
- **Plastic** - Пластиковый блок (масса: 0.5, здоровье: 30, стоимость: 3)
- **Stone** - Каменный блок (масса: 4.0, здоровье: 200, стоимость: 20)

**Особенности:**
- Различные материалы с разными свойствами
- Визуальные эффекты при повреждении
- Система разрушения по материалу

### 2. Wheel - Колеса
**Файл:** `Wheel.cs`

Колеса для передвижения машин.

**Типы колес:**
- **Small** - Маленькое колесо (радиус: 0.3, ширина: 0.2, стоимость: 25)
- **Medium** - Среднее колесо (радиус: 0.5, ширина: 0.3, стоимость: 40)
- **Large** - Большое колесо (радиус: 0.8, ширина: 0.4, стоимость: 60)
- **OffRoad** - Внедорожное колесо (радиус: 0.6, ширина: 0.5, стоимость: 80)

**Особенности:**
- Автоматическое создание WheelCollider
- Настройка подвески и трения
- Возможность применения крутящего момента
- Управление углом поворота

### 3. Motor - Двигатели
**Файл:** `Motor.cs`

Двигатели для приведения машин в движение.

**Типы двигателей:**
- **Electric** - Электрический (мощность: 50, стоимость: 100)
- **Gasoline** - Бензиновый (мощность: 100, стоимость: 200)
- **Diesel** - Дизельный (мощность: 150, стоимость: 300)
- **Jet** - Реактивный (мощность: 500, стоимость: 1000)

**Особенности:**
- Система топлива и перегрева
- Звуковые эффекты двигателя
- Подключение к колесам
- Управление оборотами

### 4. Connection - Соединения
**Файл:** `Connection.cs`

Соединения для скрепления деталей.

**Типы соединений:**
- **Fixed** - Жесткое соединение (стоимость: 10)
- **Hinge** - Шарнир (стоимость: 25)
- **Spring** - Пружина (стоимость: 40)
- **Slider** - Ползунок (стоимость: 60)
- **Configurable** - Универсальное (стоимость: 100)

**Особенности:**
- Система разрушения при нагрузке
- Визуальные эффекты напряжения
- Настройка осей и ограничений
- Мониторинг сил и моментов

### 5. DriverSeat - Сиденья водителя
**Файл:** `DriverSeat.cs`

Сиденья для управления машиной.

**Типы сидений:**
- **Basic** - Базовое сиденье (стоимость: 50)
- **Comfort** - Комфортное (стоимость: 100)
- **Racing** - Спортивное (стоимость: 200)
- **Luxury** - Люкс (стоимость: 500)
- **Industrial** - Промышленное (стоимость: 150)

**Особенности:**
- Автоматическое подключение к двигателям и колесам
- Система посадки/высадки водителя
- Управление камерой и контроллерами
- Звуковые эффекты

### 6. Tool - Инструменты
**Файл:** `Tool.cs`

Инструменты для различных задач.

**Типы инструментов:**
- **Hammer** - Молоток (стоимость: 20)
- **Wrench** - Гаечный ключ (стоимость: 30)
- **Screwdriver** - Отвертка (стоимость: 25)
- **Drill** - Дрель (стоимость: 80)
- **Welder** - Сварка (стоимость: 150)
- **Magnet** - Магнит (стоимость: 60)
- **Vacuum** - Пылесос (стоимость: 100)
- **Sprayer** - Краскопульт (стоимость: 120)

**Особенности:**
- Различные возможности (ломать, строить, ремонтировать, собирать)
- Система топлива и перезарядки
- Визуальные эффекты использования
- Звуковые эффекты

## Система наследования

Все детали наследуются от базового класса `PartBase`, который в свою очередь наследуется от `PartController`.

```
PartController (физика, соединения)
    ↓
PartBase (базовые свойства, звуки, эффекты)
    ↓
Block, Wheel, Motor, Connection, DriverSeat, Tool
```

## Общие свойства всех деталей

### Базовые параметры
- `partID` - Уникальный идентификатор
- `partName` - Название детали
- `description` - Описание
- `unlockLevel` - Уровень разблокировки
- `cost` - Стоимость в игре

### Физические свойства
- `mass` - Масса
- `health` - Здоровье
- `strength` - Прочность

### Визуальные эффекты
- `normalMaterial` - Обычный материал
- `damagedMaterial` - Поврежденный материал
- `destroyedMaterial` - Разрушенный материал
- `connectionEffect` - Эффект соединения
- `damageEffect` - Эффект повреждения
- `destroyEffect` - Эффект разрушения

### Звуковые эффекты
- `connectionSound` - Звук соединения
- `damageSound` - Звук повреждения
- `destroySound` - Звук разрушения

## Создание новых деталей

### Шаг 1: Создание класса
```csharp
public class NewPart : PartBase
{
    [Header("New Part Settings")]
    public NewPartType partType = NewPartType.Basic;
    
    public enum NewPartType
    {
        Basic,
        Advanced,
        Special
    }
    
    protected override void InitializePart()
    {
        base.InitializePart();
        
        // Настройка параметров
        partID = "newpart_" + partType.ToString().ToLower();
        partName = GetPartName(partType);
        description = GetPartDescription(partType);
        unlockLevel = GetUnlockLevel(partType);
        cost = GetCost(partType);
        
        // Настройка физических свойств
        mass = GetMass(partType);
        health = GetHealth(partType);
        strength = GetStrength(partType);
    }
}
```

### Шаг 2: Добавление в систему
1. Создать префаб детали
2. Добавить компонент скрипта
3. Настроить материалы и эффекты
4. Добавить в каталог деталей

## Интеграция с другими системами

### PartManipulator
- Выбор и перемещение деталей
- Соединение и разъединение
- Вращение и масштабирование

### GameController
- Управление двигателями
- Контроль колес
- Мониторинг состояния

### UIManager
- Отображение в панели деталей
- Показ информации о детали
- Управление разблокировкой

### TestPolygon
- Тестирование машин
- Подсчет деталей
- Оценка эффективности

## Оптимизация

### Рекомендации по производительности
- Использовать Object Pooling для эффектов
- Кэшировать компоненты в Start()
- Минимизировать вызовы Update()
- Оптимизировать физические вычисления

### Лимиты
- Максимум 100 деталей на машину
- Максимум 10 двигателей
- Максимум 20 колес
- Максимум 5 инструментов

## Отладка

### Логирование
Все детали выводят подробные логи:
- Инициализация
- Соединения/разъединения
- Повреждения/ремонт
- Ошибки и предупреждения

### Проверка состояния
```csharp
// Проверить здоровье детали
float health = part.GetHealthPercentage();

// Проверить соединения
int connections = part.GetConnectionCount();

// Проверить состояние
bool isWorking = part.IsWorking();
```

## Заключение

Система базовых деталей предоставляет полный набор компонентов для строительства машин. Каждая деталь имеет уникальные свойства и интегрируется с другими системами игры. Система легко расширяется новыми типами деталей.
